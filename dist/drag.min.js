"use strict";!function(){var t=0,e=0;window.on("mousemove",function(a){t=a.clientX,e=a.clientY}),window.on("touchmove",function(a){t=a.touches[0].clientX,e=a.touches[0].clientY}),window.on("touchstart",function(a){t=a.touches[0].clientX,e=a.touches[0].clientY});var a=function(t){var e=$create("dragcase"),a=$create("dragHolder"),r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return e.dragger={posX:r.left,posY:r.top,deg:0},e.style.position="fixed",e.style.display="block",e.style.left=e.dragger.posX+"px",e.style.top=e.dragger.posY+"px",a.style.display=s.display,a.style["float"]=s["float"],e.append(a),t.dragCase=e,t.dragHolder=a,e},r=function s(){var a=0,r=0;if(this.dragging)a=t-this.clientWidth/2-this.dragger.posX,r=e-this.dragger.posY+40;else if(a=this.dragger.targetX-this.dragger.posX,r=this.dragger.targetY-this.dragger.posY,Math.pow(a,2)+Math.pow(r,2)<.05)return this.style.left=this.dragger.targetX+"px",this.style.top=this.dragger.targetY+"px",this.style.transform="rotate(0deg)",window.cancelAnimationFrame(this.dragID),this.dragger.dragID=null,void(this.dragger.callback&&this.dragger.callback());var g=Math.tan(a/(Math.abs(this.dragger.posY-e)+2*Math.sqrt(Math.pow(this.clientHeight,2)+Math.pow(this.clientWidth,2))+100+Math.abs(a)))/Math.PI*180;g>60?g=60:-60>g&&(g=-60),g-=this.dragger.deg,this.dragger.posX=this.dragger.posX+a/8,this.dragger.posY=this.dragger.posY+r/8,this.dragger.deg=this.dragger.deg+g/8,this.style.left=this.dragger.posX+"px",this.style.top=this.dragger.posY+"px",this.style.transform="rotate("+this.dragger.deg+"deg)",this.dragger.dragID=window.requestAnimationFrame(s.bind(this))};Blyde.fn("Dragjs",{node:{startDrag:function(t,e){if(this.parentNode.dragging||"DRAGCASE"===this.tagName.toUpperCase())return this;var s="";return"DRAGCASE"===this.parentNode.tagName.toUpperCase()?s=this.parentNode:(s=a(this),t&&(s.style.width=t),e&&(s.style.height=e),this.swap(this.dragHolder)),$q("body").appendChild(s),s.dragging=!0,s.dragger.dragID||r.call(s),this},dragRelease:function(a){return"DRAGCASE"===this.tagName.toUpperCase()?this:("DRAGCASE"===this.parentNode.tagName.toUpperCase()&&this.parentNode.dragging===!0&&(this.dragCase.dragger.callback=a,this.dragCase.dragger.targetX=t-this.dragCase.clientWidth/2,this.dragCase.dragger.targetY=e,this.dragCase.dragging=!1),this)},stopDrag:function(t){return"DRAGCASE"===this.tagName.toUpperCase()?this:(this.dragCase&&(this.dragCase.dragger.dragID&&window.cancelAnimationFrame(this.dragCase.dragger.dragID),t?t():this.dragHolder.swap(this),this.dragHolder.remove(),this.dragCase.remove(),this.dragHolder=null,this.dragCase=null),this)},moveTo:function(t,e,a){return"DRAGCASE"===this.tagName.toUpperCase()?this:(this.startDrag().dragRelease(a),this.dragCase.dragger.targetX=t,this.dragCase.dragger.targetY=e,this)}}},!0)}();